/*! For license information please see tactics.js.LICENSE.txt */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/js/",r(r.s=37)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeSquareCenter=t.createEl=t.isRightButton=t.eventPosition=t.setVisible=t.translateRel=t.translateAbs=t.posToTranslateRel=t.posToTranslateAbs=t.samePiece=t.distanceSq=t.opposite=t.timer=t.memo=t.allPos=t.key2pos=t.pos2key=t.allKeys=t.invRanks=void 0;const n=r(5);t.invRanks=["8","7","6","5","4","3","2","1"],t.allKeys=Array.prototype.concat(...n.files.map(e=>n.ranks.map(t=>e+t))),t.pos2key=e=>t.allKeys[8*e[0]+e[1]],t.key2pos=e=>[e.charCodeAt(0)-97,e.charCodeAt(1)-49],t.allPos=t.allKeys.map(t.key2pos),t.memo=function(e){let t;const r=()=>(void 0===t&&(t=e()),t);return r.clear=()=>{t=void 0},r},t.timer=()=>{let e;return{start(){e=performance.now()},cancel(){e=void 0},stop(){if(!e)return 0;const t=performance.now()-e;return e=void 0,t}}},t.opposite=e=>"white"===e?"black":"white",t.distanceSq=(e,t)=>{const r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},t.samePiece=(e,t)=>e.role===t.role&&e.color===t.color;const o=(e,t,r,n)=>[(t?e[0]:7-e[0])*r,(t?7-e[1]:e[1])*n];t.posToTranslateAbs=e=>{const t=e.width/8,r=e.height/8;return(e,n)=>o(e,n,t,r)},t.posToTranslateRel=(e,t)=>o(e,t,100,100),t.translateAbs=(e,t)=>{e.style.transform=`translate(${t[0]}px,${t[1]}px)`},t.translateRel=(e,t)=>{e.style.transform=`translate(${t[0]}%,${t[1]}%)`},t.setVisible=(e,t)=>{e.style.visibility=t?"visible":"hidden"},t.eventPosition=e=>{var t;return e.clientX||0===e.clientX?[e.clientX,e.clientY]:(null===(t=e.targetTouches)||void 0===t?void 0:t[0])?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},t.isRightButton=e=>2===e.buttons||2===e.button,t.createEl=(e,t)=>{const r=document.createElement(e);return t&&(r.className=t),r},t.computeSquareCenter=function(e,r,n){const o=t.key2pos(e);return r||(o[0]=7-o[0],o[1]=7-o[1]),[n.left+n.width*o[0]/8+n.width/16,n.top+n.height*(7-o[1])/8+n.height/16]}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"e",(function(){return l})),r.d(t,"g",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return d})),r.d(t,"h",(function(){return a})),r.d(t,"f",(function(){return s})),r.d(t,"b",(function(){return g}));var n=r(2),o=r(9).Chessground;function i(e){var t={};t.orientation=color,t.movable={free:!1,showDests:!0},t.fen=e,t.highlight={check:!0},t.lastMove=void 0,t.drawable={brushes:{hint:{key:"v",color:"#0034FF",opacity:1,lineWidth:10}}},ground.set(t)}function a(e){ground.set({movable:{events:{after:e}}})}function s(e){ground.set({events:{select:e}})}function c(e){window.ground=o(document.getElementById("chessground"),{}),i(e)}function l(){var e=document.getElementById("game_container").offsetWidth-7;e+="px";var t=document.getElementById("chessground");t.style.width=e,t.style.height=e,ground.redrawAll()}function u(){var e=Object(n.a)(chess);ground.set({movable:{dests:e}})}function d(){if(!(!1 in ground.state)){var e=ground.state.lastMove;ground.move(e[1],e[0]),ground.set({fen:chess.fen()})}}function f(e){var t=e.to.split("");return"w"==e.color?t[1]=Number(t[1])-1:t[1]=Number(t[1])+1,t.join("")}function p(e){var t=new Object;t[e]=null,ground.setPieces(t)}function v(e){switch(e){case"b":return"black";case"w":return"white";case"p":return"pawn";case"r":return"rook";case"b":return"bishop";case"n":return"knight";case"q":return"queen";case"k":return"king"}}function h(e){return"w"==e?"white":"black"}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(ground.move(e.from,e.to),null!=t){var r=t.in_check();ground.set({turnColor:h(t.turn())}),ground.set({check:r})}if("e"==e.flags){var n=f(e);p(n)}if(-1!==e.flags.indexOf("p")){var o=v(e.promotion),i=v(e.color),a=e.to,s=new Map;s.set(a,{role:o,color:i}),ground.setPieces(s)}}},function(e,t,r){"use strict";function n(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"e",(function(){return c})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s}));var i=r(14);function a(e){var t=new i(e);window.chess=t}function s(e){var t,r=function(e){var t,r=[],o=n(e.moves());try{for(o.s();!(t=o.n()).done;){var i=t.value,a=e.move(i);r.push({from:a.from,to:a.to}),e.undo()}}catch(e){o.e(e)}finally{o.f()}return r}(e),o=new Map,i=n(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(o.has(a.from)){var s=o.get(a.from);s.push(a.to),o.set(a.from,s)}else o.set(a.from,[a.to])}}catch(e){i.e(e)}finally{i.f()}return o}function c(e,t,r){var n=e.move({from:t,to:r,promotion:"q"});return e.undo(),n.san}function l(e,t){var r=e.move(t);return e.undo(),{from:r.from,to:r.to}}function u(e){var t=e.turn();return"b"==t?"black":("w"==t||console.log("Chess.js;turn_color; Color is neither b nor w."),"white")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.whitePov=t.getSnappedKeyAtDomPos=t.getKeyAtDomPos=t.stop=t.cancelMove=t.playPredrop=t.playPremove=t.isDraggable=t.canMove=t.unselect=t.setSelected=t.selectSquare=t.dropNewPiece=t.userMove=t.baseNewPiece=t.baseMove=t.unsetPredrop=t.unsetPremove=t.setCheck=t.setPieces=t.reset=t.toggleOrientation=t.callUserFunction=void 0;const n=r(0),o=r(17);function i(e,...t){e&&setTimeout(()=>e(...t),1)}function a(e){e.premovable.current&&(e.premovable.current=void 0,i(e.premovable.events.unset))}function s(e){const t=e.predroppable;t.current&&(t.current=void 0,i(t.events.unset))}function c(e,t,r){const o=e.pieces.get(t),a=e.pieces.get(r);if(t===r||!o)return!1;const s=a&&a.color!==o.color?a:void 0;return r===e.selected&&p(e),i(e.events.move,t,r,s),function(e,t,r){if(!e.autoCastle)return!1;const o=e.pieces.get(t);if(!o||"king"!==o.role)return!1;const i=n.key2pos(t),a=n.key2pos(r);if(0!==i[1]&&7!==i[1]||i[1]!==a[1])return!1;4!==i[0]||e.pieces.has(r)||(6===a[0]?r=n.pos2key([7,a[1]]):2===a[0]&&(r=n.pos2key([0,a[1]])));const s=e.pieces.get(r);return!(!s||s.color!==o.color||"rook"!==s.role)&&(e.pieces.delete(t),e.pieces.delete(r),i[0]<a[0]?(e.pieces.set(n.pos2key([6,a[1]]),o),e.pieces.set(n.pos2key([5,a[1]]),s)):(e.pieces.set(n.pos2key([2,a[1]]),o),e.pieces.set(n.pos2key([3,a[1]]),s)),!0)}(e,t,r)||(e.pieces.set(r,o),e.pieces.delete(t)),e.lastMove=[t,r],e.check=void 0,i(e.events.change),s||!0}function l(e,t,r,o){if(e.pieces.has(r)){if(!o)return!1;e.pieces.delete(r)}return i(e.events.dropNewPiece,t,r),e.pieces.set(r,t),e.lastMove=[r],e.check=void 0,i(e.events.change),e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),!0}function u(e,t,r){const o=c(e,t,r);return o&&(e.movable.dests=void 0,e.turnColor=n.opposite(e.turnColor),e.animation.current=void 0),o}function d(e,t,r){if(h(e,t,r)){const n=u(e,t,r);if(n){const o=e.hold.stop();p(e);const a={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:o};return!0!==n&&(a.captured=n),i(e.movable.events.after,t,r,a),!0}}else if(function(e,t,r){return t!==r&&g(e,t)&&o.premove(e.pieces,t,e.premovable.castle).includes(r)}(e,t,r))return function(e,t,r,n){s(e),e.premovable.current=[t,r],i(e.premovable.events.set,t,r,n)}(e,t,r,{ctrlKey:e.stats.ctrlKey}),p(e),!0;return p(e),!1}function f(e,t){e.selected=t,g(e,t)?e.premovable.dests=o.premove(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function p(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function v(e,t){const r=e.pieces.get(t);return!!r&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}function h(e,t,r){var n,o;return t!==r&&v(e,t)&&(e.movable.free||!!(null===(o=null===(n=e.movable.dests)||void 0===n?void 0:n.get(t))||void 0===o?void 0:o.includes(r)))}function g(e,t){const r=e.pieces.get(t);return!!r&&e.premovable.enabled&&e.movable.color===r.color&&e.turnColor!==r.color}function m(e){a(e),s(e),p(e)}t.callUserFunction=i,t.toggleOrientation=function(e){e.orientation=n.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},t.reset=function(e){e.lastMove=void 0,p(e),a(e),s(e)},t.setPieces=function(e,t){for(const[r,n]of t)n?e.pieces.set(r,n):e.pieces.delete(r)},t.setCheck=function(e,t){if(e.check=void 0,!0===t&&(t=e.turnColor),t)for(const[r,n]of e.pieces)"king"===n.role&&n.color===t&&(e.check=r)},t.unsetPremove=a,t.unsetPredrop=s,t.baseMove=c,t.baseNewPiece=l,t.userMove=d,t.dropNewPiece=function(e,t,r,n){const o=e.pieces.get(t);o&&(function(e,t,r){const n=e.pieces.get(t);return!(!n||t!==r&&e.pieces.has(r)||"both"!==e.movable.color&&(e.movable.color!==n.color||e.turnColor!==n.color))}(e,t,r)||n)?(e.pieces.delete(t),l(e,o,r,n),i(e.movable.events.afterNewPiece,o.role,r,{predrop:!1})):o&&function(e,t,r){const n=e.pieces.get(t),o=e.pieces.get(r);return!!n&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==n.role||"1"!==r[1]&&"8"!==r[1])&&e.movable.color===n.color&&e.turnColor!==n.color}(e,t,r)?function(e,t,r){a(e),e.predroppable.current={role:t,key:r},i(e.predroppable.events.set,t,r)}(e,o.role,r):(a(e),s(e)),e.pieces.delete(t),p(e)},t.selectSquare=function(e,t,r){if(i(e.events.select,t),e.selected){if(e.selected===t&&!e.draggable.enabled)return p(e),void e.hold.cancel();if((e.selectable.enabled||r)&&e.selected!==t&&d(e,e.selected,t))return void(e.stats.dragged=!1)}(v(e,t)||g(e,t))&&(f(e,t),e.hold.start())},t.setSelected=f,t.unselect=p,t.canMove=h,t.isDraggable=function(e,t){const r=e.pieces.get(t);return!!r&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===r.color&&(e.turnColor===r.color||e.premovable.enabled))},t.playPremove=function(e){const t=e.premovable.current;if(!t)return!1;const r=t[0],n=t[1];let o=!1;if(h(e,r,n)){const t=u(e,r,n);if(t){const a={premove:!0};!0!==t&&(a.captured=t),i(e.movable.events.after,r,n,a),o=!0}}return a(e),o},t.playPredrop=function(e,t){const r=e.predroppable.current;let n=!1;if(!r)return!1;if(t(r)){l(e,{role:r.role,color:e.movable.color},r.key)&&(i(e.movable.events.afterNewPiece,r.role,r.key,{predrop:!0}),n=!0)}return s(e),n},t.cancelMove=m,t.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,m(e)},t.getKeyAtDomPos=function(e,t,r){let o=Math.floor(8*(e[0]-r.left)/r.width);t||(o=7-o);let i=7-Math.floor(8*(e[1]-r.top)/r.height);return t||(i=7-i),o>=0&&o<8&&i>=0&&i<8?n.pos2key([o,i]):void 0},t.getSnappedKeyAtDomPos=function(e,t,r,i){const a=n.key2pos(e),s=n.allPos.filter(e=>o.queen(a[0],a[1],e[0],e[1])||o.knight(a[0],a[1],e[0],e[1])),c=s.map(e=>n.computeSquareCenter(n.pos2key(e),r,i)).map(e=>n.distanceSq(t,e)),[,l]=c.reduce((e,t,r)=>e[0]<t?e:[t,r],[c[0],0]);return n.pos2key(s[l])},t.whitePov=function(e){return"white"===e.orientation}},function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return n})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"f",(function(){return a}));var n="success",o="error",i="info",a="suggestion";function s(){c(o,""),c(i,""),c(n,""),c(a,"")}function c(e,t){var r=document.getElementById(e);if(t.length>0)switch(r.classList.remove("hidden"),e){case n:t="✓ "+t;break;case i:t="🛈 "+t;break;case o:t="✕ "+t}else r.classList.add("hidden");r.textContent=t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ranks=t.files=t.colors=void 0,t.colors=["white","black"],t.files=["a","b","c","d","e","f","g","h"],t.ranks=["1","2","3","4","5","6","7","8"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.write=t.read=t.initial=void 0;const n=r(0),o=r(5);t.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";const i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},a={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};t.read=function(e){"start"===e&&(e=t.initial);const r=new Map;let o=7,a=0;for(const t of e)switch(t){case" ":return r;case"/":if(--o,o<0)return r;a=0;break;case"~":const e=r.get(n.pos2key([a,o]));e&&(e.promoted=!0);break;default:const s=t.charCodeAt(0);if(s<57)a+=s-48;else{const e=t.toLowerCase();r.set(n.pos2key([a,o]),{role:i[e],color:t===e?"black":"white"}),++a}}return r},t.write=function(e){return n.invRanks.map(t=>o.files.map(r=>{const n=e.get(r+t);if(n){const e=a[n.role];return"white"===n.color?e.toUpperCase():e}return"1"}).join("")).join("/").replace(/1{2,}/g,e=>e.length.toString())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancel=t.end=t.move=t.dragNewPiece=t.start=void 0;const n=r(3),o=r(0),i=r(12),a=r(11);function s(e){requestAnimationFrame(()=>{var t;const r=e.draggable.current;if(!r)return;(null===(t=e.animation.current)||void 0===t?void 0:t.plan.anims.has(r.orig))&&(e.animation.current=void 0);const n=e.pieces.get(r.orig);if(n&&o.samePiece(n,r.piece)){if(!r.started&&o.distanceSq(r.pos,r.origPos)>=Math.pow(e.draggable.distance,2)&&(r.started=!0),r.started){if("function"==typeof r.element){const e=r.element();if(!e)return;e.cgDragging=!0,e.classList.add("dragging"),r.element=e}const t=e.dom.bounds();o.translateAbs(r.element,[r.pos[0]-t.left-t.width/16,r.pos[1]-t.top-t.height/16])}}else c(e);s(e)})}function c(e){const t=e.draggable.current;t&&(t.newPiece&&e.pieces.delete(t.orig),e.draggable.current=void 0,n.unselect(e),l(e),e.dom.redraw())}function l(e){const t=e.dom.elements;t.ghost&&o.setVisible(t.ghost,!1)}function u(e,t){let r=e.dom.elements.board.firstChild;for(;r;){if(r.cgKey===t&&"PIECE"===r.tagName)return r;r=r.nextSibling}}t.start=function(e,t){if(void 0!==t.button&&0!==t.button)return;if(t.touches&&t.touches.length>1)return;const r=e.dom.bounds(),c=o.eventPosition(t),l=n.getKeyAtDomPos(c,n.whitePov(e),r);if(!l)return;const d=e.pieces.get(l),f=e.selected;f||!e.drawable.enabled||!e.drawable.eraseOnClick&&d&&d.color===e.turnColor||i.clear(e),!1===t.cancelable||t.touches&&e.movable.color&&!d&&!f&&!function(e,t){const r=n.whitePov(e),i=e.dom.bounds(),a=Math.pow(i.width/8,2);for(const n in e.pieces){const e=o.computeSquareCenter(n,r,i);if(o.distanceSq(e,t)<=a)return!0}return!1}(e,c)||t.preventDefault();const p=!!e.premovable.current,v=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&n.canMove(e,e.selected,l)?a.anim(e=>n.selectSquare(e,l),e):n.selectSquare(e,l);const h=e.selected===l,g=u(e,l);if(d&&g&&h&&n.isDraggable(e,l)){e.draggable.current={orig:l,piece:d,origPos:c,pos:c,started:e.draggable.autoDistance&&e.stats.dragged,element:g,previouslySelected:f,originTarget:t.target},g.cgDragging=!0,g.classList.add("dragging");const i=e.dom.elements.ghost;i&&(i.className=`ghost ${d.color} ${d.role}`,o.translateAbs(i,o.posToTranslateAbs(r)(o.key2pos(l),n.whitePov(e))),o.setVisible(i,!0)),s(e)}else p&&n.unsetPremove(e),v&&n.unsetPredrop(e);e.dom.redraw()},t.dragNewPiece=function(e,t,r,n){e.pieces.set("a0",t),e.dom.redraw();const i=o.eventPosition(r);e.draggable.current={orig:"a0",piece:t,origPos:i,pos:i,started:!0,element:()=>u(e,"a0"),originTarget:r.target,newPiece:!0,force:!!n},s(e)},t.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.pos=o.eventPosition(t))},t.end=function(e,t){const r=e.draggable.current;if(!r)return;if("touchend"===t.type&&!1!==t.cancelable&&t.preventDefault(),"touchend"===t.type&&r.originTarget!==t.target&&!r.newPiece)return void(e.draggable.current=void 0);n.unsetPremove(e),n.unsetPredrop(e);const i=o.eventPosition(t)||r.pos,a=n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds());a&&r.started&&r.orig!==a?r.newPiece?n.dropNewPiece(e,r.orig,a,r.force):(e.stats.ctrlKey=t.ctrlKey,n.userMove(e,r.orig,a)&&(e.stats.dragged=!0)):r.newPiece?e.pieces.delete(r.orig):e.draggable.deleteOnDropOff&&!a&&(e.pieces.delete(r.orig),n.callUserFunction(e.events.change)),(r.orig!==r.previouslySelected||r.orig!==a&&a)&&e.selectable.enabled||n.unselect(e),l(e),e.draggable.current=void 0,e.dom.redraw()},t.cancel=c},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chessground=void 0;const n=r(16),o=r(10),i=r(19),a=r(20),s=r(21),c=r(23),l=r(13),u=r(0);function d(e){let t=!1;return()=>{t||(t=!0,requestAnimationFrame(()=>{e(),t=!1}))}}t.Chessground=function(e,t){const r=i.defaults();function f(){const t="dom"in r?r.dom.unbind:void 0,n=r.viewOnly&&!r.drawable.visible,o=a.renderWrap(e,r,n),i=u.memo(()=>o.board.getBoundingClientRect()),f=e=>{c.render(v),!e&&o.svg&&l.renderSvg(v,o.svg)},p=()=>{i.clear(),c.updateBounds(v),o.svg&&l.renderSvg(v,o.svg)},v=r;return v.dom={elements:o,bounds:i,redraw:d(f),redrawNow:f,unbind:t,relative:n},v.drawable.prevSvgHash="",f(!1),s.bindBoard(v,p),t||(v.dom.unbind=s.bindDocument(v,p)),v.events.insert&&v.events.insert(o),v}return o.configure(r,t||{}),n.start(f(),f)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.configure=void 0;const n=r(3),o=r(6);function i(e){return"object"==typeof e}t.configure=function(e,t){var r;if((null===(r=t.movable)||void 0===r?void 0:r.dests)&&(e.movable.dests=void 0),function e(t,r){for(const n in r)i(t[n])&&i(r[n])?e(t[n],r[n]):t[n]=r[n]}(e,t),t.fen&&(e.pieces=o.read(t.fen),e.drawable.shapes=[]),t.hasOwnProperty("check")&&n.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&n.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){const t="white"===e.movable.color?"1":"8",r="e"+t,n=e.movable.dests.get(r),o=e.pieces.get(r);if(!n||!o||"king"!==o.role)return;e.movable.dests.set(r,n.filter(e=>!(e==="a"+t&&n.includes("c"+t)||e==="h"+t&&n.includes("g"+t))))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.render=t.anim=void 0;const n=r(0);function o(e,t){const r=e(t);return t.dom.redraw(),r}function i(e,t){return{key:e,pos:n.key2pos(e),piece:t}}function a(e,t){return t.sort((t,r)=>n.distanceSq(e.pos,t.pos)-n.distanceSq(e.pos,r.pos))[0]}t.anim=function(e,t){return t.animation.enabled?function(e,t){const r=new Map(t.pieces),o=e(t),s=function(e,t){const r=new Map,o=[],s=new Map,c=[],l=[],u=new Map;let d,f,p;for(const[t,r]of e)u.set(t,i(t,r));for(const e of n.allKeys)d=t.pieces.get(e),f=u.get(e),d?f?n.samePiece(d,f.piece)||(c.push(f),l.push(i(e,d))):l.push(i(e,d)):f&&c.push(f);for(const e of l)f=a(e,c.filter(t=>n.samePiece(e.piece,t.piece))),f&&(p=[f.pos[0]-e.pos[0],f.pos[1]-e.pos[1]],r.set(e.key,p.concat(p)),o.push(f.key));for(const e of c)o.includes(e.key)||s.set(e.key,e.piece);return{anims:r,fadings:s}}(r,t);if(s.anims.size||s.fadings.size){const e=t.animation.current&&t.animation.current.start;t.animation.current={start:performance.now(),frequency:1/t.animation.duration,plan:s},e||function e(t,r){const n=t.animation.current;if(void 0===n)return void(t.dom.destroyed||t.dom.redrawNow());const o=1-(r-n.start)*n.frequency;if(o<=0)t.animation.current=void 0,t.dom.redrawNow();else{const r=(i=o)<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1;for(const e of n.plan.anims.values())e[2]=e[0]*r,e[3]=e[1]*r;t.dom.redrawNow(!0),requestAnimationFrame((r=performance.now())=>e(t,r))}var i}(t,performance.now())}else t.dom.redraw();return o}(e,t):o(e,t)},t.render=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.cancel=t.end=t.move=t.processDraw=t.start=void 0;const n=r(3),o=r(0),i=["green","red","blue","yellow"];function a(e){requestAnimationFrame(()=>{const t=e.drawable.current;if(t){const r=n.getKeyAtDomPos(t.pos,n.whitePov(e),e.dom.bounds());r||(t.snapToValidMove=!1);const o=t.snapToValidMove?n.getSnappedKeyAtDomPos(t.orig,t.pos,n.whitePov(e),e.dom.bounds()):r;o!==t.mouseSq&&(t.mouseSq=o,t.dest=o!==t.orig?o:void 0,e.dom.redrawNow()),a(e)}})}function s(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function c(e){var t;const r=(e.shiftKey||e.ctrlKey)&&o.isRightButton(e),n=e.altKey||e.metaKey||(null===(t=e.getModifierState)||void 0===t?void 0:t.call(e,"AltGraph"));return i[(r?1:0)+(n?2:0)]}function l(e){e.onChange&&e.onChange(e.shapes)}t.start=function(e,t){if(t.touches&&t.touches.length>1)return;t.stopPropagation(),t.preventDefault(),t.ctrlKey?n.unselect(e):n.cancelMove(e);const r=o.eventPosition(t),i=n.getKeyAtDomPos(r,n.whitePov(e),e.dom.bounds());i&&(e.drawable.current={orig:i,pos:r,brush:c(t),snapToValidMove:e.drawable.defaultSnapToValidMove},a(e))},t.processDraw=a,t.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=o.eventPosition(t))},t.end=function(e){const t=e.drawable.current;t&&(t.mouseSq&&function(e,t){const r=e=>e.orig===t.orig&&e.dest===t.dest,n=e.shapes.find(r);n&&(e.shapes=e.shapes.filter(e=>!r(e)));n&&n.brush===t.brush||e.shapes.push(t);l(e)}(e.drawable,t),s(e))},t.cancel=s,t.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),l(e.drawable))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderSvg=t.createElement=void 0;const n=r(0);function o(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function i({orig:e,dest:t,brush:r,piece:n,modifiers:o},i,s,c){return[c.width,c.height,s,e,t,r,t&&(i.get(t)||0)>1,n&&a(n),o&&(l=o,""+(l.lineWidth||""))].filter(e=>e).join(",");var l}function a(e){return[e.color,e.role,e.scale].filter(e=>e).join(",")}function s(e,{shape:t,current:r,hash:i},a,s,c){let h;if(t.piece)h=function(e,t,r,n){const i=v(t,n),a=n.width/8*(r.scale||1),s=r.color[0]+("knight"===r.role?"n":r.role[0]).toUpperCase();return l(o("image"),{className:`${r.role} ${r.color}`,x:i[0]-a/2,y:i[1]-a/2,width:a,height:a,href:e+s+".svg"})}(e.drawable.pieces.baseUrl,u(n.key2pos(t.orig),e.orientation),t.piece,c);else{const i=u(n.key2pos(t.orig),e.orientation);if(t.dest){let g=a[t.brush];t.modifiers&&(g=d(g,t.modifiers)),h=function(e,t,r,n,i,a){const s=function(e,t){return(t?20:10)/512*e.width}(a,i&&!n),c=v(t,a),u=v(r,a),d=u[0]-c[0],h=u[1]-c[1],g=Math.atan2(h,d),m=Math.cos(g)*s,b=Math.sin(g)*s;return l(o("line"),{stroke:e.color,"stroke-width":f(e,n,a),"stroke-linecap":"round","marker-end":"url(#arrowhead-"+e.key+")",opacity:p(e,n),x1:c[0],y1:c[1],x2:u[0]-m,y2:u[1]-b})}(g,i,u(n.key2pos(t.dest),e.orientation),r,(s.get(t.dest)||0)>1,c)}else h=function(e,t,r,n){const i=v(t,n),a=function(e){const t=e.width/512;return[3*t,4*t]}(n),s=(n.width+n.height)/32;return l(o("circle"),{stroke:e.color,"stroke-width":a[r?0:1],fill:"none",opacity:p(e,r),cx:i[0],cy:i[1],r:s-a[1]/2})}(a[t.brush],i,r,c)}return h.setAttribute("cgHash",i),h}function c(e){const t=l(o("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(l(o("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function l(e,t){for(const r in t)e.setAttribute(r,t[r]);return e}function u(e,t){return"white"===t?e:[7-e[0],7-e[1]]}function d(e,t){return{color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth),key:[e.key,t.lineWidth].filter(e=>e).join("")}}function f(e,t,r){return(e.lineWidth||10)*(t?.85:1)/512*r.width}function p(e,t){return(e.opacity||1)*(t?.9:1)}function v(e,t){return[(e[0]+.5)*t.width/8,(7.5-e[1])*t.height/8]}t.createElement=o,t.renderSvg=function(e,t){const r=e.drawable,n=r.current,o=n&&n.mouseSq?n:void 0,a=new Map,l=e.dom.bounds();for(const e of r.shapes.concat(r.autoShapes).concat(o?[o]:[]))e.dest&&a.set(e.dest,(a.get(e.dest)||0)+1);const u=r.shapes.concat(r.autoShapes).map(e=>({shape:e,current:!1,hash:i(e,a,!1,l)}));o&&u.push({shape:o,current:!0,hash:i(o,a,!0,l)});const f=u.map(e=>e.hash).join(";");if(f===e.drawable.prevSvgHash)return;e.drawable.prevSvgHash=f;const p=t.firstChild;!function(e,t,r){const n=new Map;let o;for(const r of t)r.shape.dest&&(o=e.brushes[r.shape.brush],r.shape.modifiers&&(o=d(o,r.shape.modifiers)),n.set(o.key,o));const i=new Set;let a=r.firstChild;for(;a;)i.add(a.getAttribute("cgKey")),a=a.nextSibling;for(const[e,t]of n.entries())i.has(e)||r.appendChild(c(t))}(r,u,p),function(e,t,r,n,o,i){const a=e.dom.bounds(),c=new Map,l=[];for(const e of t)c.set(e.hash,!1);let u,d=i.nextSibling;for(;d;)u=d.getAttribute("cgHash"),c.has(u)?c.set(u,!0):l.push(d),d=d.nextSibling;for(const e of l)o.removeChild(e);for(const i of t)c.get(i.hash)||o.appendChild(s(e,i,r,n,a))}(e,u,r.brushes,a,t,p)}},function(e,t,r){var n,o=function(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",r=["1-0","0-1","1/2-1/2","*"],n={b:[16,32,17,15],w:[-16,-32,-17,-15]},o={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],a=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],s={p:0,n:1,b:2,r:3,q:4,k:5},c={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},l={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},u={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},d={w:[{square:u.a1,flag:l.QSIDE_CASTLE},{square:u.h1,flag:l.KSIDE_CASTLE}],b:[{square:u.a8,flag:l.QSIDE_CASTLE},{square:u.h8,flag:l.KSIDE_CASTLE}]},f=new Array(128),p={w:-1,b:-1},v="w",h={w:0,b:0},g=-1,m=0,b=1,y=[],w={};function P(e){void 0===e&&(e=!1),f=new Array(128),p={w:-1,b:-1},v="w",h={w:0,b:0},g=-1,m=0,b=1,y=[],e||(w={}),A(S())}function k(){_(t)}function _(e,t){void 0===t&&(t=!1);var r=e.split(/\s+/),n=r[0],o=0;if(!E(e).valid)return!1;P(t);for(var i=0;i<n.length;i++){var a=n.charAt(i);if("/"===a)o+=8;else if(-1!=="0123456789".indexOf(a))o+=parseInt(a,10);else{var s=a<"a"?"w":"b";x({type:a.toLowerCase(),color:s},G(o)),o++}}return v=r[1],r[2].indexOf("K")>-1&&(h.w|=l.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(h.w|=l.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(h.b|=l.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(h.b|=l.QSIDE_CASTLE),g="-"===r[3]?-1:u[r[3]],m=parseInt(r[4],10),b=parseInt(r[5],10),A(S()),!0}function E(e){var t="No errors.",r="FEN string must contain six space-delimited fields.",n="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",a="3rd field (castling availability) is invalid.",s="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",d="1st field (piece positions) is invalid [row too large].",f="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:r};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:n};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:a};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:s};var v=p[0].split("/");if(8!==v.length)return{valid:!1,error_number:7,error:c};for(var h=0;h<v.length;h++){for(var g=0,m=!1,b=0;b<v[h].length;b++)if(isNaN(v[h][b])){if(!/^[prnbqkPRNBQK]$/.test(v[h][b]))return{valid:!1,error_number:9,error:u};g+=1,m=!1}else{if(m)return{valid:!1,error_number:8,error:l};g+=parseInt(v[h][b],10),m=!0}if(8!==g)return{valid:!1,error_number:10,error:d}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:f}:{valid:!0,error_number:0,error:t}}function S(){for(var e=0,t="",r=u.a8;r<=u.h1;r++){if(null==f[r])e++;else{e>0&&(t+=e,e=0);var n=f[r].color,o=f[r].type;t+="w"===n?o.toUpperCase():o.toLowerCase()}r+1&136&&(e>0&&(t+=e),r!==u.h1&&(t+="/"),e=0,r+=8)}var i="";h.w&l.KSIDE_CASTLE&&(i+="K"),h.w&l.QSIDE_CASTLE&&(i+="Q"),h.b&l.KSIDE_CASTLE&&(i+="k"),h.b&l.QSIDE_CASTLE&&(i+="q"),i=i||"-";var a=-1===g?"-":G(g);return[t,v,i,a,m,b].join(" ")}function C(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(w[e[t]]=e[t+1]);return w}function A(e){y.length>0||(e!==t?(w.SetUp="1",w.FEN=e):(delete w.SetUp,delete w.FEN))}function O(e){var t=f[u[e]];return t?{type:t.type,color:t.color}:null}function x(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in u))return!1;var r=u[t];return("k"!=e.type||-1==p[e.color]||p[e.color]==r)&&(f[r]={type:e.type,color:e.color},"k"===e.type&&(p[e.color]=r),A(S()),!0)}function M(e,t,r,n,o){var i={color:v,from:t,to:r,flags:n,piece:e[t].type};return o&&(i.flags|=l.PROMOTION,i.promotion=o),e[r]?i.captured=e[r].type:n&l.EP_CAPTURE&&(i.captured="p"),i}function L(e){function t(e,t,r,n,o){if("p"!==e[r].type||0!==W(n)&&7!==W(n))t.push(M(e,r,n,o));else for(var i=["q","r","b","n"],a=0,s=i.length;a<s;a++)t.push(M(e,r,n,o,i[a]))}var r=[],i=v,a=z(i),s={b:1,w:6},c=u.a8,d=u.h1,m=!1,b=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in u))return[];c=d=u[e.square],m=!0}for(var y=c;y<=d;y++)if(136&y)y+=7;else{var w=f[y];if(null!=w&&w.color===i)if("p"===w.type){var P=y+n[i][0];if(null==f[P]){t(f,r,y,P,l.NORMAL);P=y+n[i][1];s[i]===W(y)&&null==f[P]&&t(f,r,y,P,l.BIG_PAWN)}for(k=2;k<4;k++){136&(P=y+n[i][k])||(null!=f[P]&&f[P].color===a?t(f,r,y,P,l.CAPTURE):P===g&&t(f,r,y,g,l.EP_CAPTURE))}}else for(var k=0,_=o[w.type].length;k<_;k++){var E=o[w.type][k];for(P=y;!(136&(P+=E));){if(null!=f[P]){if(f[P].color===i)break;t(f,r,y,P,l.CAPTURE);break}if(t(f,r,y,P,l.NORMAL),"n"===w.type||"k"===w.type)break}}}if(!m||d===p[i]){if(h[i]&l.KSIDE_CASTLE){var S=(C=p[i])+2;null!=f[C+1]||null!=f[S]||N(a,p[i])||N(a,C+1)||N(a,S)||t(f,r,p[i],S,l.KSIDE_CASTLE)}if(h[i]&l.QSIDE_CASTLE){var C;S=(C=p[i])-2;null!=f[C-1]||null!=f[C-2]||null!=f[C-3]||N(a,p[i])||N(a,C-1)||N(a,S)||t(f,r,p[i],S,l.QSIDE_CASTLE)}}if(!b)return r;var A=[];for(y=0,_=r.length;y<_;y++)U(r[y]),q(i)||A.push(r[y]),F();return A}function T(e,t){var r="";if(e.flags&l.KSIDE_CASTLE)r="O-O";else if(e.flags&l.QSIDE_CASTLE)r="O-O-O";else{var n=function(e,t){for(var r=L({legal:!t}),n=e.from,o=e.to,i=e.piece,a=0,s=0,c=0,l=0,u=r.length;l<u;l++){var d=r[l].from,f=r[l].to,p=r[l].piece;i===p&&n!==d&&o===f&&(a++,W(n)===W(d)&&s++,$(n)===$(d)&&c++)}if(a>0)return s>0&&c>0?G(n):c>0?G(n).charAt(1):G(n).charAt(0);return""}(e,t);"p"!==e.piece&&(r+=e.piece.toUpperCase()+n),e.flags&(l.CAPTURE|l.EP_CAPTURE)&&("p"===e.piece&&(r+=G(e.from)[0]),r+="x"),r+=G(e.to),e.flags&l.PROMOTION&&(r+="="+e.promotion.toUpperCase())}return U(e),I()&&(D()?r+="#":r+="+"),F(),r}function j(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function N(e,t){for(var r=u.a8;r<=u.h1;r++)if(136&r)r+=7;else if(null!=f[r]&&f[r].color===e){var n=f[r],o=r-t,c=o+119;if(i[c]&1<<s[n.type]){if("p"===n.type){if(o>0){if("w"===n.color)return!0}else if("b"===n.color)return!0;continue}if("n"===n.type||"k"===n.type)return!0;for(var l=a[c],d=r+l,p=!1;d!==t;){if(null!=f[d]){p=!0;break}d+=l}if(!p)return!0}}return!1}function q(e){return N(z(e),p[e])}function I(){return q(v)}function D(){return I()&&0===L().length}function K(){return!I()&&0===L().length}function R(){for(var e={},t=[],r=0,n=0,o=u.a8;o<=u.h1;o++)if(n=(n+1)%2,136&o)o+=7;else{var i=f[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,"b"===i.type&&t.push(n),r++)}if(2===r)return!0;if(3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){var a=0,s=t.length;for(o=0;o<s;o++)a+=t[o];if(0===a||a===s)return!0}return!1}function B(){for(var e=[],t={},r=!1;;){var n=F();if(!n)break;e.push(n)}for(;;){var o=S().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(r=!0),!e.length)break;U(e.pop())}return r}function U(e){var t=v,r=z(t);if(function(e){y.push({move:e,kings:{b:p.b,w:p.w},turn:v,castling:{b:h.b,w:h.w},ep_square:g,half_moves:m,move_number:b})}(e),f[e.to]=f[e.from],f[e.from]=null,e.flags&l.EP_CAPTURE&&("b"===v?f[e.to-16]=null:f[e.to+16]=null),e.flags&l.PROMOTION&&(f[e.to]={type:e.promotion,color:t}),"k"===f[e.to].type){if(p[f[e.to].color]=e.to,e.flags&l.KSIDE_CASTLE){var n=e.to-1,o=e.to+1;f[n]=f[o],f[o]=null}else if(e.flags&l.QSIDE_CASTLE){n=e.to+1,o=e.to-2;f[n]=f[o],f[o]=null}h[t]=""}if(h[t])for(var i=0,a=d[t].length;i<a;i++)if(e.from===d[t][i].square&&h[t]&d[t][i].flag){h[t]^=d[t][i].flag;break}if(h[r])for(i=0,a=d[r].length;i<a;i++)if(e.to===d[r][i].square&&h[r]&d[r][i].flag){h[r]^=d[r][i].flag;break}g=e.flags&l.BIG_PAWN?"b"===v?e.to-16:e.to+16:-1,"p"===e.piece||e.flags&(l.CAPTURE|l.EP_CAPTURE)?m=0:m++,"b"===v&&b++,v=z(v)}function F(){var e=y.pop();if(null==e)return null;var t=e.move;p=e.kings,v=e.turn,h=e.castling,g=e.ep_square,m=e.half_moves,b=e.move_number;var r,n,o=v,i=z(v);if(f[t.from]=f[t.to],f[t.from].type=t.piece,f[t.to]=null,t.flags&l.CAPTURE)f[t.to]={type:t.captured,color:i};else if(t.flags&l.EP_CAPTURE){var a;a="b"===o?t.to-16:t.to+16,f[a]={type:"p",color:i}}t.flags&(l.KSIDE_CASTLE|l.QSIDE_CASTLE)&&(t.flags&l.KSIDE_CASTLE?(r=t.to+1,n=t.to-1):t.flags&l.QSIDE_CASTLE&&(r=t.to-2,n=t.to+1),f[r]=f[n],f[n]=null);return t}function Q(e,t){var r=j(e);if(t){var n=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(n)var o=n[1],i=n[2],a=n[3],s=n[4]}for(var c=L(),l=0,d=c.length;l<d;l++){if(r===j(T(c[l]))||t&&r===j(T(c[l],!0)))return c[l];if(n&&(!o||o.toLowerCase()==c[l].piece)&&u[i]==c[l].from&&u[a]==c[l].to&&(!s||s.toLowerCase()==c[l].promotion))return c[l]}return null}function W(e){return e>>4}function $(e){return 15&e}function G(e){var t=$(e),r=W(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function z(e){return"w"===e?"b":"w"}function H(e){var t=function e(t){var r=t instanceof Array?[]:{};for(var n in t)r[n]="object"==typeof n?e(t[n]):t[n];return r}(e);t.san=T(t,!1),t.to=G(t.to),t.from=G(t.from);var r="";for(var n in l)l[n]&t.flags&&(r+=c[n]);return t.flags=r,t}function V(e){return e.replace(/^\s+|\s+$/g,"")}return _(void 0===e?t:e),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var e=[],t=u.a8;t<=u.h1;t++)136&t?t+=7:e.push(G(t));return e}(),FLAGS:c,load:function(e){return _(e)},reset:function(){return k()},moves:function(e){for(var t=L(e),r=[],n=0,o=t.length;n<o;n++)void 0!==e&&"verbose"in e&&e.verbose?r.push(H(t[n])):r.push(T(t[n],!1));return r},in_check:function(){return I()},in_checkmate:function(){return D()},in_stalemate:function(){return K()},in_draw:function(){return m>=100||K()||R()||B()},insufficient_material:function(){return R()},in_threefold_repetition:function(){return B()},game_over:function(){return m>=100||D()||K()||R()||B()},validate_fen:function(e){return E(e)},fen:function(){return S()},board:function(){for(var e=[],t=[],r=u.a8;r<=u.h1;r++)null==f[r]?t.push(null):t.push({type:f[r].type,color:f[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e},pgn:function(e){var t="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",r="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,n=[],o=!1;for(var i in w)n.push("["+i+' "'+w[i]+'"]'+t),o=!0;o&&y.length&&n.push(t);for(var a=[];y.length>0;)a.push(F());for(var s=[],c="";a.length>0;){var l=a.pop();y.length||"b"!==l.color?"w"===l.color&&(c.length&&s.push(c),c=b+"."):c=b+". ...",c=c+" "+T(l,!1),U(l)}if(c.length&&s.push(c),void 0!==w.Result&&s.push(w.Result),0===r)return n.join("")+s.join(" ");var u=0;for(i=0;i<s.length;i++)u+s[i].length>r&&0!==i?(" "===n[n.length-1]&&n.pop(),n.push(t),u=0):0!==i&&(n.push(" "),u++),n.push(s[i]),u+=s[i].length;return n.join("")},load_pgn:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy;function o(e){return e.replace(/\\/g,"\\")}var i="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",a=new RegExp("^(\\[((?:"+o(i)+")|.)*\\])(?:"+o(i)+"){2}"),s=a.test(e)?a.exec(e)[1]:"";k();var c=function(e,t){for(var r="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",n={},i=e.split(new RegExp(o(r))),a="",s="",c=0;c<i.length;c++)a=i[c].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),s=i[c].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),V(a).length>0&&(n[a]=s);return n}(s,t);for(var l in c)C([l,c[l]]);if(!("1"!==c.SetUp||"FEN"in c&&_(c.FEN,!0)))return!1;var u=e.replace(s,"").replace(new RegExp(o(i),"g")," ");u=u.replace(/(\{[^}]+\})+?/g,"");for(var d=/(\([^\(\)]+\))+?/g;d.test(u);)u=u.replace(d,"");var f=V(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");for(var p="",v=0;v<f.length-1;v++){if(null==(p=Q(f[v],n)))return!1;U(p)}if(p=f[f.length-1],r.indexOf(p)>-1)(function(e){for(var t in e)return!0;return!1})(w)&&void 0===w.Result&&C(["Result",p]);else{if(null==(p=Q(p,n)))return!1;U(p)}return!0},header:function(){return C(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=u.a8;t<=u.h1;t++){if(0===$(t)&&(e+=" "+"87654321"[W(t)]+" |"),null==f[t])e+=" . ";else{var r=f[t].type;e+=" "+("w"===f[t].color?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return v},move:function(e,t){var r=void 0!==t&&"sloppy"in t&&t.sloppy,n=null;if("string"==typeof e)n=Q(e,r);else if("object"==typeof e)for(var o=L(),i=0,a=o.length;i<a;i++)if(e.from===G(o[i].from)&&e.to===G(o[i].to)&&(!("promotion"in o[i])||e.promotion===o[i].promotion)){n=o[i];break}if(!n)return null;var s=H(n);return U(n),s},undo:function(){var e=F();return e?H(e):null},clear:function(){return P()},put:function(e,t){return x(e,t)},get:function(e){return O(e)},remove:function(e){return function(e){var t=O(e);return f[u[e]]=null,t&&"k"===t.type&&(p[t.color]=-1),A(S()),t}(e)},perft:function(e){return function e(t){for(var r=L({legal:!1}),n=0,o=v,i=0,a=r.length;i<a;i++){if(U(r[i]),!q(o))if(t-1>0)n+=e(t-1);else n++;F()}return n}(e)},square_color:function(e){if(e in u){var t=u[e];return(W(t)+$(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],r=[],n=(void 0!==e&&"verbose"in e&&e.verbose);y.length>0;)t.push(F());for(;t.length>0;){var o=t.pop();n?r.push(H(o)):r.push(T(o)),U(o)}return r}}};t.Chess=o,void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)},function(e,t,r){"use strict";function n(e){return new Promise((function(t){return setTimeout(t,e)}))}r.d(t,"a",(function(){return n}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.start=void 0;const n=r(3),o=r(6),i=r(10),a=r(11),s=r(7),c=r(18);t.start=function(e,t){function r(){n.toggleOrientation(e),t()}return{set(t){t.orientation&&t.orientation!==e.orientation&&r(),(t.fen?a.anim:a.render)(e=>i.configure(e,t),e)},state:e,getFen:()=>o.write(e.pieces),toggleOrientation:r,setPieces(t){a.anim(e=>n.setPieces(e,t),e)},selectSquare(t,r){t?a.anim(e=>n.selectSquare(e,t,r),e):e.selected&&(n.unselect(e),e.dom.redraw())},move(t,r){a.anim(e=>n.baseMove(e,t,r),e)},newPiece(t,r){a.anim(e=>n.baseNewPiece(e,t,r),e)},playPremove(){if(e.premovable.current){if(a.anim(n.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop(t){if(e.predroppable.current){const r=n.playPredrop(e,t);return e.dom.redraw(),r}return!1},cancelPremove(){a.render(n.unsetPremove,e)},cancelPredrop(){a.render(n.unsetPredrop,e)},cancelMove(){a.render(e=>{n.cancelMove(e),s.cancel(e)},e)},stop(){a.render(e=>{n.stop(e),s.cancel(e)},e)},explode(t){c.explosion(e,t)},setAutoShapes(t){a.render(e=>e.drawable.autoShapes=t,e)},setShapes(t){a.render(e=>e.drawable.shapes=t,e)},getKeyAtDomPos:t=>n.getKeyAtDomPos(t,n.whitePov(e),e.dom.bounds()),redrawAll:t,dragNewPiece(t,r,n){s.dragNewPiece(e,t,r,n)},destroy(){n.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.premove=t.queen=t.knight=void 0;const n=r(0);function o(e,t){return Math.abs(e-t)}t.knight=(e,t,r,n)=>{const i=o(e,r),a=o(t,n);return 1===i&&2===a||2===i&&1===a};const i=(e,t,r,n)=>o(e,r)===o(t,n),a=(e,t,r,n)=>e===r||t===n;t.queen=(e,t,r,n)=>i(e,t,r,n)||a(e,t,r,n),t.premove=function(e,r,s){const c=e.get(r);if(!c)return[];const l=n.key2pos(r),u=c.role,d="pawn"===u?function(e){return(t,r,n,i)=>o(t,n)<2&&("white"===e?i===r+1||r<=1&&i===r+2&&t===n:i===r-1||r>=6&&i===r-2&&t===n)}(c.color):"knight"===u?t.knight:"bishop"===u?i:"rook"===u?a:"queen"===u?t.queen:function(e,t,r){return(n,i,a,s)=>o(n,a)<2&&o(i,s)<2||r&&i===s&&i===("white"===e?0:7)&&(4===n&&(2===a&&t.includes(0)||6===a&&t.includes(7))||t.includes(a))}(c.color,function(e,t){const r="white"===t?"1":"8",o=[];for(const[i,a]of e)i[1]===r&&a.color===t&&"rook"===a.role&&o.push(n.key2pos(i)[0]);return o}(e,c.color),s);return n.allPos.filter(e=>(l[0]!==e[0]||l[1]!==e[1])&&d(l[0],l[1],e[0],e[1])).map(n.pos2key)}},function(e,t,r){"use strict";function n(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(t,"__esModule",{value:!0}),t.explosion=void 0,t.explosion=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout(()=>{n(e,2),setTimeout(()=>n(e,void 0),120)},120)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaults=void 0;const n=r(6),o=r(0);t.defaults=function(){return{pieces:n.read(n.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,showGhost:!0,deleteOnDropOff:!1},dropmode:{active:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,defaultSnapToValidMove:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:o.timer()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderWrap=void 0;const n=r(0),o=r(5),i=r(13);function a(e,t){const r=n.createEl("coords",t);let o;for(const t of e)o=n.createEl("coord"),o.textContent=t,r.appendChild(o);return r}t.renderWrap=function(e,t,r){e.innerHTML="",e.classList.add("cg-wrap");for(const r of o.colors)e.classList.toggle("orientation-"+r,t.orientation===r);e.classList.toggle("manipulable",!t.viewOnly);const s=n.createEl("cg-helper");e.appendChild(s);const c=n.createEl("cg-container");s.appendChild(c);const l=n.createEl("cg-board");let u,d;if(c.appendChild(l),t.drawable.visible&&!r&&(u=i.createElement("svg"),u.appendChild(i.createElement("defs")),c.appendChild(u)),t.coordinates){const e="black"===t.orientation?" black":"";c.appendChild(a(o.ranks,"ranks"+e)),c.appendChild(a(o.files,"files"+e))}return t.draggable.showGhost&&!r&&(d=n.createEl("piece","ghost"),n.setVisible(d,!1),c.appendChild(d)),{board:l,container:c,ghost:d,svg:u}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindDocument=t.bindBoard=void 0;const n=r(7),o=r(12),i=r(22),a=r(0);function s(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function c(e,t,r){return n=>{e.drawable.current?e.drawable.enabled&&r(e,n):e.viewOnly||t(e,n)}}t.bindBoard=function(e,t){const r=e.dom.elements.board;if(!e.dom.relative&&e.resizable&&"ResizeObserver"in window){new window.ResizeObserver(t).observe(r)}if(e.viewOnly)return;const s=function(e){return t=>{e.draggable.current?n.cancel(e):e.drawable.current?o.cancel(e):t.shiftKey||a.isRightButton(t)?e.drawable.enabled&&o.start(e,t):e.viewOnly||(e.dropmode.active?i.drop(e,t):n.start(e,t))}}(e);r.addEventListener("touchstart",s,{passive:!1}),r.addEventListener("mousedown",s,{passive:!1}),(e.disableContextMenu||e.drawable.enabled)&&r.addEventListener("contextmenu",e=>e.preventDefault())},t.bindDocument=function(e,t){const r=[];if(e.dom.relative||!e.resizable||"ResizeObserver"in window||r.push(s(document.body,"chessground.resize",t)),!e.viewOnly){const t=c(e,n.move,o.move),i=c(e,n.end,o.end);for(const e of["touchmove","mousemove"])r.push(s(document,e,t));for(const e of["touchend","mouseup"])r.push(s(document,e,i));const a=()=>e.dom.bounds.clear();r.push(s(document,"scroll",a,{capture:!0,passive:!0})),r.push(s(window,"resize",a,{passive:!0}))}return()=>r.forEach(e=>e())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drop=t.cancelDropMode=t.setDropMode=void 0;const n=r(3),o=r(0),i=r(7);t.setDropMode=function(e,t){e.dropmode={active:!0,piece:t},i.cancel(e)},t.cancelDropMode=function(e){e.dropmode={active:!1}},t.drop=function(e,t){if(!e.dropmode.active)return;n.unsetPremove(e),n.unsetPredrop(e);const r=e.dropmode.piece;if(r){e.pieces.set("a0",r);const i=o.eventPosition(t),a=i&&n.getKeyAtDomPos(i,n.whitePov(e),e.dom.bounds());a&&n.dropNewPiece(e,"a0",a)}e.dom.redraw()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateBounds=t.render=void 0;const n=r(0),o=r(3),i=r(0);function a(e){return"PIECE"===e.tagName}function s(e){return"SQUARE"===e.tagName}function c(e,t){for(const r of t)e.dom.elements.board.removeChild(r)}function l(e,t){let r=2+8*e[1]+(7-e[0]);return t&&(r=67-r),r+""}function u(e){return`${e.color} ${e.role}`}function d(e,t,r){const n=e.get(t);n?e.set(t,`${n} ${r}`):e.set(t,r)}function f(e,t,r){const n=e.get(t);n?n.push(r):e.set(t,[r])}t.render=function(e){const t=o.whitePov(e),r=e.dom.relative?i.posToTranslateRel:i.posToTranslateAbs(e.dom.bounds()),p=e.dom.relative?i.translateRel:i.translateAbs,v=e.dom.elements.board,h=e.pieces,g=e.animation.current,m=g?g.plan.anims:new Map,b=g?g.plan.fadings:new Map,y=e.draggable.current,w=function(e){var t;const r=new Map;if(e.lastMove&&e.highlight.lastMove)for(const t of e.lastMove)d(r,t,"last-move");e.check&&e.highlight.check&&d(r,e.check,"check");if(e.selected&&(d(r,e.selected,"selected"),e.movable.showDests)){const n=null===(t=e.movable.dests)||void 0===t?void 0:t.get(e.selected);if(n)for(const t of n)d(r,t,"move-dest"+(e.pieces.has(t)?" oc":""));const o=e.premovable.dests;if(o)for(const t of o)d(r,t,"premove-dest"+(e.pieces.has(t)?" oc":""))}const n=e.premovable.current;if(n)for(const e of n)d(r,e,"current-premove");else e.predroppable.current&&d(r,e.predroppable.current.key,"current-premove");const o=e.exploding;if(o)for(const e of o.keys)d(r,e,"exploding"+o.stage);return r}(e),P=new Set,k=new Set,_=new Map,E=new Map;let S,C,A,O,x,M,L,T,j,N;for(C=v.firstChild;C;){if(S=C.cgKey,a(C))if(A=h.get(S),x=m.get(S),M=b.get(S),O=C.cgPiece,!C.cgDragging||y&&y.orig===S||(C.classList.remove("dragging"),p(C,r(n.key2pos(S),t)),C.cgDragging=!1),!M&&C.cgFading&&(C.cgFading=!1,C.classList.remove("fading")),A){if(x&&C.cgAnimating&&O===u(A)){const e=n.key2pos(S);e[0]+=x[2],e[1]+=x[3],C.classList.add("anim"),p(C,r(e,t))}else C.cgAnimating&&(C.cgAnimating=!1,C.classList.remove("anim"),p(C,r(n.key2pos(S),t)),e.addPieceZIndex&&(C.style.zIndex=l(n.key2pos(S),t)));O!==u(A)||M&&C.cgFading?M&&O===u(M)?(C.classList.add("fading"),C.cgFading=!0):f(_,O,C):P.add(S)}else f(_,O,C);else if(s(C)){const e=C.className;w.get(S)===e?k.add(S):f(E,e,C)}C=C.nextSibling}for(const[e,o]of w)if(!k.has(e)){j=E.get(o),N=j&&j.pop();const i=r(n.key2pos(e),t);if(N)N.cgKey=e,p(N,i);else{const t=n.createEl("square",o);t.cgKey=e,p(t,i),v.insertBefore(t,v.firstChild)}}for(const[o,i]of h)if(x=m.get(o),!P.has(o))if(L=_.get(u(i)),T=L&&L.pop(),T){T.cgKey=o,T.cgFading&&(T.classList.remove("fading"),T.cgFading=!1);const i=n.key2pos(o);e.addPieceZIndex&&(T.style.zIndex=l(i,t)),x&&(T.cgAnimating=!0,T.classList.add("anim"),i[0]+=x[2],i[1]+=x[3]),p(T,r(i,t))}else{const a=u(i),s=n.createEl("piece",a),c=n.key2pos(o);s.cgPiece=a,s.cgKey=o,x&&(s.cgAnimating=!0,c[0]+=x[2],c[1]+=x[3]),p(s,r(c,t)),e.addPieceZIndex&&(s.style.zIndex=l(c,t)),v.appendChild(s)}for(const t of _.values())c(e,t);for(const t of E.values())c(e,t)},t.updateBounds=function(e){if(e.dom.relative)return;const t=o.whitePov(e),r=i.posToTranslateAbs(e.dom.bounds());let c=e.dom.elements.board.firstChild;for(;c;)(a(c)&&!c.cgAnimating||s(c))&&i.translateAbs(c,r(n.key2pos(c.cgKey),t)),c=c.nextSibling}},,function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof d?t:d,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function f(){}function p(){}var v={};v[o]=function(){return this};var h=Object.getPrototypeOf,g=h&&h(h(E([])));g&&g!==t&&r.call(g,o)&&(v=g);var m=p.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){var n;this._invoke=function(o,i){function a(){return new t((function(n,a){!function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=m.constructor=p,p.constructor=f,f.displayName=s(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[i]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new y(c(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(m),s(m,a,"Generator"),m[o]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},,,,,,,,,,,,function(e,t,r){e.exports=r(38)},function(e,t,r){"use strict";r.r(t);var n=r(1),o=r(2),i=r(4),a=r(15);function s(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,c,"next",e)}function c(e){s(i,n,o,a,c,"throw",e)}a(void 0)}))}}r(25);r(9).Chessground,r(14);function l(e){document.getElementById(e).classList.remove("hidden")}function u(e,t,r){return d.apply(this,arguments)}function d(){return(d=c(regeneratorRuntime.mark((function e(t,r,s){var c,u,d,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(o.e)(chess,t,r),u=to_play.shift(),Object(i.a)(),c!=u){e.next=19;break}if(d=chess.move(c),Object(n.b)(d,chess),!(to_play.length>=2)){e.next=15;break}return e.next=9,Object(a.a)(100);case 9:f=to_play.shift(),p=chess.move(f),Object(n.c)(),Object(n.b)(p,chess),e.next=17;break;case 15:Object(i.d)(i.e,gettext_success),l("next");case 17:e.next=27;break;case 19:return e.next=21,Object(a.a)(300);case 21:to_play.unshift(u),Object(n.d)(),Object(n.c)(),Object(i.d)(i.b,gettext_wrong_move),l("next"),l("solution");case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){fen=document.getElementById("fen").value,color=document.getElementById("color").value,moves=document.getElementById("moves").value,last_move=document.getElementById("last_move").value,window.to_play=moves.split(" "),fen!=old_fen&&(Object(n.g)(fen),old_fen=fen),function(){if(!(last_move.length<4)){var e=last_move.substring(0,2),t=last_move.substring(2,4);ground.state.lastMove=[e,t]}}(),Object(o.c)(fen),Object(n.c)(),Object(n.e)(),Object(n.h)(u)}document.addEventListener("phx:update",f),window.onresize=n.e,window.old_fen="abc",f()}]);